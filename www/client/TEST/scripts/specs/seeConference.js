// Generated by CoffeeScript 1.4.0

define(['jquery'], function($) {
  describe("As a user I want to watch the conference in real time", function() {
    describe("test that the connection is established", function() {
      return it("should connect to the server", function() {
        var connected, testConnected;
        connected = null;
        runs(function() {
          return connected = false;
        });
        testConnected = function() {
          connected = $('.js-status').hasClass('connected');
          return connected;
        };
        waitsFor(testConnected, "The connection should be established", 5000);
        return runs(function() {
          return expect(connected).toBe(true);
        });
      });
    });
    describe("Data received is a slide and what kind it is", function() {
      return it("should ");
    });
    return describe("that if I receive two slide the last one which contains title WORLD is shown", function() {
      return it("should display the last slide only", function() {
        var found, testLastSlide;
        found = null;
        runs(function() {
          return found = false;
        });
        testLastSlide = function() {
          var lastSlideText;
          lastSlideText = $('#SlideList>div').last().find('h1').text();
          if (lastSlideText === "WORLD") {
            found = true;
            console.log('found World');
            return true;
          } else {
            return false;
          }
        };
        waitsFor(testLastSlide, "Second slide found", 10000);
        return runs(function() {
          var slideCount;
          slideCount = 0;
          $('#SlideList>div>div').each(function(index, elem) {
            slideCount++;
            console.log(elem);
            if (index === 1) {
              return expect($(elem).css('display')).toBe('block');
            } else {
              return expect($(elem).css('display')).toBe('none');
            }
          });
          expect(found).toBe(true);
          return expect(slideCount).toBe(2);
        });
      });
    });
  });
  return describe("As user I want to be able to go back to a previous slide", function() {
    describe("test that the previous slide is shown", function() {
      return it("should display the previous slide received", function() {
        var found, testpreviousSlide;
        found = null;
        runs(function() {
          return found = false;
        });
        testpreviousSlide = function() {
          var displayTxt;
          displayTxt = $('#SlideList>div>div').last().css('display');
          if (displayTxt === 'none') {
            found = true;
            console.log('none found');
            return true;
          } else {
            return false;
          }
        };
        waitsFor(testpreviousSlide, "previous slide found", 10000);
        return runs(function() {
          var slideCount;
          slideCount = 0;
          $('#SlideList>div>div').each(function(index, elem) {
            slideCount++;
            console.log(elem);
            if (index === 1) {
              return expect($(elem).css('display')).toBe('none');
            } else {
              return expect($(elem).css('display')).toBe('block');
            }
          });
          expect(found).toBe(true);
          return expect(slideCount).toBe(2);
        });
      });
    });
    return describe("test that the next slide is shown", function() {
      return it("should display the next slide received", function() {
        var found, testpreviousSlide;
        found = null;
        runs(function() {
          return found = false;
        });
        testpreviousSlide = function() {
          var displayTxt, testnextSlide;
          displayTxt = $('#SlideList>div>div').last().css('display');
          if (displayTxt === 'none') {
            found = true;
            testnextSlide = function() {
              var displayTxtwo;
              displayTxtwo = $('#SlideList>div>div').last().css('display');
              if (displayTxtwo === 'block') {
                found = true;
                return true;
              } else {

              }
              return false;
            };
            waitsFor(testnextSlide, "next slide found", 10000);
            return true;
          } else {
            return false;
          }
        };
        waitsFor(testpreviousSlide, "previous slide found", 10000);
        return runs(function() {
          var slideCount;
          slideCount = 0;
          $('#SlideList>div>div').each(function(index, elem) {
            slideCount++;
            console.log(elem);
            if (index === 1) {
              return expect($(elem).css('display')).toBe('block');
            } else {
              return expect($(elem).css('display')).toBe('none');
            }
          });
          expect(found).toBe(true);
          return expect(slideCount).toBe(2);
        });
      });
    });
  });
});
